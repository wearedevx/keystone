# Init project

ks init test-project

# Add secret to current env

ks secret add label value -s -o

stdout 'Variable .*label.* is set for 3 environment\(s\)'

# Verify not required in list
ks secret
cmp stdout expected.txt

# Require the secret
ks secret require label

stdout 'Secret .* is now required.'

# Verify required in list
ks secret

cmp stdout expected2.txt



-- expected.txt --
╭─────────────┬────────────────────────────────────────────╮
│ SECRET NAME │                ENVIRONMENTS                │
│             ├──────────────┬──────────────┬──────────────┤
│             │ DEV          │ PROD         │ STAGING      │
├─────────────┼──────────────┼──────────────┼──────────────┤
│ label       │ value        │ value        │ value        │
╰─────────────┴──────────────┴──────────────┴──────────────╯
 * Required secrets
-- expected2.txt --
╭─────────────┬────────────────────────────────────────────╮
│ SECRET NAME │                ENVIRONMENTS                │
│             ├──────────────┬──────────────┬──────────────┤
│             │ DEV          │ PROD         │ STAGING      │
├─────────────┼──────────────┼──────────────┼──────────────┤
│ label *     │ value        │ value        │ value        │
╰─────────────┴──────────────┴──────────────┴──────────────╯
 * Required secrets
