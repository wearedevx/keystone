# Init project

ks init test-project

# Add secret to current env

ks secret add LABEL value -s -o

stdout 'Variable .*LABEL.* is set for 3 environment\(s\)'

# Verify not required in list
ks secret
cmp stdout expected.txt

# Require the secret
ks secret require LABEL

stdout 'Secret .* is now required.'

# Verify required in list
ks secret

cmp stdout expected2.txt



-- expected.txt --
Environment dev up to date ✔
Environment staging up to date ✔
Environment prod up to date ✔
╭─────────────┬────────────────────────────────────────────╮
│ SECRET NAME │                ENVIRONMENTS                │
│             ├──────────────┬──────────────┬──────────────┤
│             │ DEV          │ PROD         │ STAGING      │
├─────────────┼──────────────┼──────────────┼──────────────┤
│ LABEL       │ value        │ value        │ value        │
╰─────────────┴──────────────┴──────────────┴──────────────╯
 * Required secrets; A Available secrets
-- expected2.txt --
Environment dev up to date ✔
Environment staging up to date ✔
Environment prod up to date ✔
╭─────────────┬────────────────────────────────────────────╮
│ SECRET NAME │                ENVIRONMENTS                │
│             ├──────────────┬──────────────┬──────────────┤
│             │ DEV          │ PROD         │ STAGING      │
├─────────────┼──────────────┼──────────────┼──────────────┤
│ LABEL *     │ value        │ value        │ value        │
╰─────────────┴──────────────┴──────────────┴──────────────╯
 * Required secrets; A Available secrets
